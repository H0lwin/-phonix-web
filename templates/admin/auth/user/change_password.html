{% extends "admin/base_site.html" %}
{% load admin_urls i18n static %}

{% block extrastyle %}{{ block.super }}{% endblock %}

{% block bodyclass %}{{ block.super }} {{ opts.app_label }}-{{ opts.model_name }} change-form{% endblock %}

{% block content %}
    <div id="content-main">
        <form{% if form_url %} action="{{ form_url }}"{% endif %} method="post" id="{{ opts.model_name }}_form">{% csrf_token %}{% block form_top %}{% endblock %}
            <input type="text" name="username" value="{{ original.get_username }}" class="hidden">

            {% if is_popup %}
                <input type="hidden" name="{{ is_popup_var }}" value="1">
            {% endif %}

            {% if form.errors %}
                <div style="color: #dc2626; padding: 12px; margin-bottom: 12px; background-color: #fee2e2; border-radius: 4px;">
                    <strong>{% trans "خطا!" %}</strong>
                    <ul style="margin: 8px 0 0 0;">
                        {% for field, errors in form.errors.items %}
                            {% for error in errors %}
                                <li>{{ field }}: {{ error }}</li>
                            {% endfor %}
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}

            {% blocktranslate with username=original asvar message %}برای کاربر <strong>{{ username }}</strong> یک رمز عبور جدید وارد کنید.{% endblocktranslate %}
            <div style="color: #0369a1; padding: 12px; margin-bottom: 12px; background-color: #cffafe; border-radius: 4px;">
                {{ message }}
            </div>

            <fieldset class="border" style="padding: 12px; margin-bottom: 32px; border-radius: 4px;">
                <div style="margin-bottom: 16px;">
                    <label for="id_password1" style="display: block; margin-bottom: 4px; font-weight: 500;">{{ form.password1.label }}</label>
                    {{ form.password1 }}
                    {% if form.password1.help_text %}
                        <small style="display: block; margin-top: 4px; color: #666;">{{ form.password1.help_text|safe }}</small>
                    {% endif %}
                </div>

                <div style="margin-bottom: 16px;">
                    <label for="id_password2" style="display: block; margin-bottom: 4px; font-weight: 500;">{{ form.password2.label }}</label>
                    {{ form.password2 }}
                    {% if form.password2.help_text %}
                        <small style="display: block; margin-top: 4px; color: #666;">{{ form.password2.help_text|safe }}</small>
                    {% endif %}
                </div>
            </fieldset>

            <button type="submit" style="background-color: #2563eb; color: white; padding: 8px 12px; border-radius: 4px; border: none; cursor: pointer; font-weight: 500;">
                {% trans 'تغییر رمز عبور' %}
            </button>
        </form>
    </div>
{% endblock %}