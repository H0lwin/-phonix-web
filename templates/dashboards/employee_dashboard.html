{% extends "dashboards/base_dashboard.html" %}

{% block tabs_nav %}
<!-- ุชุจ ูุง ฺฉุงุฑููุฏ -->
<button class="tab-nav-btn active" data-tab="overview">
    <span class="tab-nav-icon">๐</span>
    <span class="tab-nav-text">ููุง ฺฉู</span>
</button>

<button class="tab-nav-btn" data-tab="attendance">
    <span class="tab-nav-icon">๐</span>
    <span class="tab-nav-text">ุญุถูุฑ ู ุบุงุจ</span>
</button>

<button class="tab-nav-btn" data-tab="leave">
    <span class="tab-nav-icon">๐๏ธ</span>
    <span class="tab-nav-text">ุฏุฑุฎูุงุณุช ูุฑุฎุต</span>
</button>

<button class="tab-nav-btn" data-tab="loans">
    <span class="tab-nav-icon">๐ฆ</span>
    <span class="tab-nav-text">ูุงูโูุง</span>
</button>

<button class="tab-nav-btn" data-tab="services">
    <span class="tab-nav-icon">๐๏ธ</span>
    <span class="tab-nav-text">ุฎุฏูุงุช</span>
</button>

<!-- ูพููุฏ ุตูุญู ุงูู -->
<a href="{% url 'core:index' %}" class="nav-item">
    <span class="nav-icon">๐</span>
    <span>ุตูุญู ุงูู</span>
</a>
{% endblock %}

{% block content %}
<div class="dashboard-tabs">
    <!-- ุจุฎุด: ููุง ฺฉู -->
    <div class="tab-content active" id="overview-tab">
        <div class="tab-header">
            <h2>ููุง ฺฉู</h2>
        </div>

        <!-- ุฑุฏู ุขูุงุฑ -->
        <div class="stats-row">
            <div class="stat-card">
                <div class="stat-icon">๐</div>
                <div class="stat-info">
                    <p class="stat-value">{{ total_cases }}</p>
                    <p class="stat-label">ฺฉู ูพุฑููุฏูโูุง</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">โณ</div>
                <div class="stat-info">
                    <p class="stat-value">{{ pending_cases }}</p>
                    <p class="stat-label">ูพุฑููุฏูโูุง ููุชุธุฑ</p>
                </div>
            </div>
        </div>

        <!-- ุจุฎุด ุชูุงู ูพุฑููุฏูโูุง -->
        <div class="section-full">
            <div class="section-header">
                <h2>ุชูุงู ูพุฑููุฏูโูุง</h2>
            </div>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ุดูุงุฑู ูพุฑููุฏู</th>
                            <th>ุนููุงู</th>
                            <th>ูฺฉู ูุณุฆูู</th>
                            <th>ูุถุนุช</th>
                            <th>ุชุงุฑุฎ ุงุฌุงุฏ</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for case in recent_cases %}
                        <tr>
                            <td><strong>{{ case.case_number }}</strong></td>
                            <td>{{ case.title }}</td>
                            <td>
                                {% if case.assigned_lawyer %}
                                    {{ case.assigned_lawyer.first_name }} {{ case.assigned_lawyer.last_name }}
                                {% else %}
                                    <span class="badge unassigned">ุชุนู ูุดุฏู</span>
                                {% endif %}
                            </td>
                            <td>
                                <span class="badge status-{{ case.status }}">
                                    {% if case.status == 'pending' %}
                                        ุฏุฑ ุงูุชุธุงุฑ
                                    {% elif case.status == 'in_progress' %}
                                        ุฏุฑ ุญุงู ุจุฑุฑุณ
                                    {% elif case.status == 'completed' %}
                                        ุชฺฉููโุดุฏู
                                    {% else %}
                                        ุจุณุชูโุดุฏู
                                    {% endif %}
                                </span>
                            </td>
                            <td>{{ case.created_at|date:"Y-m-d" }}</td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="5" class="text-center text-muted">ูฺ ูพุฑููุฏูโุง ููุฌูุฏ ูุณุช</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ุงุทูุงุนุงุช ฺฉุงุฑููุฏ -->
        <div class="info-section">
            <h3>ุงุทูุงุนุงุช ูู</h3>
            <div class="info-card">
                <div class="info-item">
                    <span class="info-label">ูุงู:</span>
                    <span class="info-value">{{ user.first_name }} {{ user.last_name }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">ุงูู:</span>
                    <span class="info-value">{{ user.email }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">ุจุฎุด:</span>
                    <span class="info-value">{{ user.profile.department }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">ุชููู:</span>
                    <span class="info-value">{{ user.profile.phone }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ุจุฎุด: ุญุถูุฑ ู ุบุงุจ -->
    <div class="tab-content" id="attendance-tab">
        <div class="tab-header">
            <h2>๐ ุซุจุช ุญุถูุฑ ู ุบุงุจ</h2>
        </div>

        <!-- ุณุชุงุชูุณ ุงูุฑูุฒ -->
        <div class="attendance-status">
            <div class="status-card">
                <div class="status-content">
                    <h3>ูุถุนุช ุงูุฑูุฒ</h3>
                    <div class="status-info" id="attendanceStatus">
                        <p class="loading-text">ุฏุฑุญุงู ุจุงุฑฺฏุฐุงุฑ...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ุฏฺฉููโูุง ูุฑูุฏ ู ุฎุฑูุฌ -->
        <div class="attendance-actions">
            <button id="checkInBtn" class="btn btn-success btn-lg" style="display: none;">
                <span class="btn-icon">โ</span>
                <span class="btn-text">ูุฑูุฏ ุจู ุณุณุชู</span>
            </button>
            <button id="checkOutBtn" class="btn btn-danger btn-lg" style="display: none;">
                <span class="btn-icon">๐ช</span>
                <span class="btn-text">ุฎุฑูุฌ ุงุฒ ุณุณุชู</span>
            </button>
            <div id="actionMessage" class="message-box" style="display: none;"></div>
        </div>

        <!-- ุชุงุฑุฎฺู ุญุถูุฑ ููุชฺฏ -->
        <div class="section-full">
            <div class="section-header">
                <h2>ุชุงุฑุฎฺู ุญุถูุฑ (ท ุฑูุฒ ุงุฎุฑ)</h2>
            </div>

            <div class="table-container">
                <table class="data-table attendance-table">
                    <thead>
                        <tr>
                            <th>ุชุงุฑุฎ</th>
                            <th>ุฒูุงู ูุฑูุฏ</th>
                            <th>ุฒูุงู ุฎุฑูุฌ</th>
                            <th>ูุฏุช ฺฉุงุฑ</th>
                            <th>ุงุถุงููโฺฉุงุฑ</th>
                            <th>ูุถุนุช</th>
                        </tr>
                    </thead>
                    <tbody id="attendanceTable">
                        <tr>
                            <td colspan="6" class="text-center text-muted">ุฏุฑุญุงู ุจุงุฑฺฏุฐุงุฑ...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ุขูุงุฑ ุญุถูุฑ ูุงูุงูู -->
        <div class="stats-row">
            <div class="stat-card">
                <div class="stat-icon">๐</div>
                <div class="stat-info">
                    <p class="stat-value" id="totalDays">-</p>
                    <p class="stat-label">ุฑูุฒ ุญุถูุฑ</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">โฐ</div>
                <div class="stat-info">
                    <p class="stat-value" id="totalHours">-</p>
                    <p class="stat-label">ฺฉู ุณุงุนุงุช ฺฉุงุฑ</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">โก</div>
                <div class="stat-info">
                    <p class="stat-value" id="totalOvertime">-</p>
                    <p class="stat-label">ุงุถุงููโฺฉุงุฑ</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ุจุฎุด: ุฏุฑุฎูุงุณุช ูุฑุฎุต -->
    <div class="tab-content" id="leave-tab">
        <div class="tab-header">
            <h2>๐๏ธ ุฏุฑุฎูุงุณุช ูุฑุฎุต</h2>
        </div>

        <div style="text-align: center; padding: 40px;">
            <p style="font-size: 18px; margin-bottom: 30px;">ุจุฑุง ุฏุฑุฎูุงุณุช ูุฑุฎุตุ ูุทูุงู ุจู ุตูุญู ุฏุฑุฎูุงุณุช ุจุฑูุฏ</p>
            <a href="{% url 'core:employee_leave_request' %}" class="btn btn-primary btn-lg">
                <span class="btn-icon">๐</span>
                <span class="btn-text">ุฏุฑุฎูุงุณุช ูุฑุฎุต ุฌุฏุฏ</span>
            </a>
        </div>
    </div>

    <!-- ุจุฎุด: ูุงูโูุง -->
    <div class="tab-content" id="loans-tab">
        <div class="tab-header">
            <h2>ูุงูโูุง</h2>
            <div class="subtabs-nav">
                <button class="subtab-btn active" data-subtab="loans-list">๐ ูุงูโูุง</button>
                <button class="subtab-btn" data-subtab="loans-buyers">๐ฅ ุฎุฑุฏุงุฑุงู ูุงู</button>
            </div>
        </div>

        <div class="subtab-content active" id="loans-list-subtab">
            <div class="section-full">
                <div class="section-header">
                    <h3>ูุณุช ูุงูโูุง</h3>
                </div>
                <div class="empty-state">
                    <p>๐ ุจุฎุด ูุงูโูุง (ุฏุฑ ุญุงู ุชูุณุนู)</p>
                </div>
            </div>
        </div>

        <div class="subtab-content" id="loans-buyers-subtab">
            <div class="section-full">
                <div class="section-header">
                    <h3>ุฎุฑุฏุงุฑุงู ูุงู</h3>
                </div>
                <div class="empty-state">
                    <p>๐ ุจุฎุด ุฎุฑุฏุงุฑุงู ูุงู (ุฏุฑ ุญุงู ุชูุณุนู)</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ุจุฎุด: ุฎุฏูุงุช -->
    <div class="tab-content" id="services-tab">
        <div class="tab-header">
            <h2>ุฎุฏูุงุช</h2>
        </div>
        <div class="empty-state">
            <p>๐ ุงู ุจุฎุด ุฏุฑ ุญุงู ุชูุณุนู ุงุณุช</p>
        </div>
    </div>
</div>
{% endblock %}