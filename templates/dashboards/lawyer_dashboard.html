{% extends "dashboards/base_dashboard.html" %}

{% block tabs_nav %}
<!-- ØªØ¨ Ù‡Ø§ÛŒ ÙˆÚ©ÛŒÙ„ -->
<button class="tab-nav-btn active" data-tab="overview">
    <span class="tab-nav-icon">ğŸ“Š</span>
    <span class="tab-nav-text">Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ</span>
</button>

<button class="tab-nav-btn" data-tab="attendance">
    <span class="tab-nav-icon">ğŸ•</span>
    <span class="tab-nav-text">Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨</span>
</button>

<button class="tab-nav-btn" data-tab="leave">
    <span class="tab-nav-icon">ğŸ–ï¸</span>
    <span class="tab-nav-text">Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø±Ø®ØµÛŒ</span>
</button>

<button class="tab-nav-btn" data-tab="cases">
    <span class="tab-nav-icon">ğŸ“‹</span>
    <span class="tab-nav-text">Ù¾Ø±ÙˆÙ†Ø¯Ù‡â€ŒÙ‡Ø§</span>
</button>

<!-- Ù¾ÛŒÙˆÙ†Ø¯ ØµÙØ­Ù‡ Ø§ÙˆÙ„ -->
<a href="{% url 'core:index' %}" class="nav-item">
    <span class="nav-icon">ğŸ </span>
    <span>ØµÙØ­Ù‡ Ø§ÙˆÙ„</span>
</a>
{% endblock %}

{% block content %}
<div class="dashboard-tabs">
    <!-- Ø¨Ø®Ø´: Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ -->
    <div class="tab-content active" id="overview-tab">
        <div class="tab-header">
            <h2>Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ</h2>
        </div>

        <!-- Ø±Ø¯ÛŒÙ Ø¢Ù…Ø§Ø± -->
        <div class="stats-row">
            <div class="stat-card">
                <div class="stat-icon">ğŸ“‹</div>
                <div class="stat-info">
                    <p class="stat-value">{{ total_assigned }}</p>
                    <p class="stat-label">Ú©Ù„ Ù¾Ø±ÙˆÙ†Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">âš™ï¸</div>
                <div class="stat-info">
                    <p class="stat-value">{{ in_progress_cases }}</p>
                    <p class="stat-label">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">âœ…</div>
                <div class="stat-info">
                    <p class="stat-value">{{ completed_cases }}</p>
                    <p class="stat-label">ØªÚ©Ù…ÛŒÙ„â€ŒØ´Ø¯Ù‡</p>
                </div>
            </div>
        </div>

        <!-- Ø¨Ø®Ø´ Ù¾Ø±ÙˆÙ†Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù† -->
        <div class="section-full">
            <div class="section-header">
                <h2>Ù¾Ø±ÙˆÙ†Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†</h2>
            </div>

            <div class="cases-list">
                {% for case in recent_cases %}
                <div class="case-card">
                    <div class="case-header">
                        <h3>{{ case.title }}</h3>
                        <span class="case-number">{{ case.case_number }}</span>
                    </div>
                    
                    <p class="case-description">{{ case.description|truncatewords:20 }}</p>
                    
                    <div class="case-meta">
                        <div class="meta-item">
                            <span class="meta-label">ÙˆØ¶Ø¹ÛŒØª:</span>
                            <span class="badge status-{{ case.status }}">
                                {% if case.status == 'pending' %}
                                    Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±
                                {% elif case.status == 'in_progress' %}
                                    Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ
                                {% elif case.status == 'completed' %}
                                    ØªÚ©Ù…ÛŒÙ„â€ŒØ´Ø¯Ù‡
                                {% else %}
                                    Ø¨Ø³ØªÙ‡â€ŒØ´Ø¯Ù‡
                                {% endif %}
                            </span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯:</span>
                            <span>{{ case.created_at|date:"Y-m-d" }}</span>
                        </div>
                    </div>

                    <div class="case-actions">
                        <a href="{% url 'admin:core_casefile_change' case.pk %}" class="btn btn-small btn-primary">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª</a>
                    </div>
                </div>
                {% empty %}
                <div class="empty-state">
                    <p class="empty-icon">ğŸ“­</p>
                    <p class="empty-text">Ù‡ÛŒÚ† Ù¾Ø±ÙˆÙ†Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ù‡ Ø´Ù…Ø§ Ø§Ø®ØªØµØ§Øµ Ø¯Ø§Ø¯Ù‡ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Ø¢Ù…Ø§Ø± Ø³Ø±ÛŒØ¹ -->
        <div class="quick-stats">
            <h3>Ø¢Ù…Ø§Ø± Ø³Ø±ÛŒØ¹</h3>
            <div class="stats-detail">
                <div class="stat-detail-item">
                    <span class="stat-label">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù¾Ø±ÙˆÙ†Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„:</span>
                    <span class="stat-value-sm">{{ in_progress_cases }}</span>
                </div>
                <div class="stat-detail-item">
                    <span class="stat-label">Ø¯Ø±ØµØ¯ ØªÚ©Ù…ÛŒÙ„:</span>
                    <span class="stat-value-sm">
                        {% if total_assigned > 0 %}
                            {{ completed_cases|add:0|mul:100|div:total_assigned|floatformat:0 }}%
                        {% else %}
                            Û°%
                        {% endif %}
                    </span>
                </div>
            </div>
        </div>
    </div>

    <!-- Ø¨Ø®Ø´: Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ -->
    <div class="tab-content" id="attendance-tab">
        <div class="tab-header">
            <h2>ğŸ• Ø«Ø¨Øª Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨</h2>
        </div>

        <!-- Ø³ØªØ§ØªÙˆØ³ Ø§Ù…Ø±ÙˆØ² -->
        <div class="attendance-status">
            <div class="status-card">
                <div class="status-content">
                    <h3>ÙˆØ¶Ø¹ÛŒØª Ø§Ù…Ø±ÙˆØ²</h3>
                    <div class="status-info" id="attendanceStatus">
                        <p class="loading-text">Ø¯Ø±Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ Ùˆ Ø®Ø±ÙˆØ¬ -->
        <div class="attendance-actions">
            <button id="checkInBtn" class="btn btn-success btn-lg" style="display: none;">
                <span class="btn-icon">âœ…</span>
                <span class="btn-text">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…</span>
            </button>
            <button id="checkOutBtn" class="btn btn-danger btn-lg" style="display: none;">
                <span class="btn-icon">ğŸšª</span>
                <span class="btn-text">Ø®Ø±ÙˆØ¬ Ø§Ø² Ø³ÛŒØ³ØªÙ…</span>
            </button>
            <div id="actionMessage" class="message-box" style="display: none;"></div>
        </div>

        <!-- ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø­Ø¶ÙˆØ± Ù‡ÙØªÚ¯ÛŒ -->
        <div class="section-full">
            <div class="section-header">
                <h2>ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø­Ø¶ÙˆØ± (Û· Ø±ÙˆØ² Ø§Ø®ÛŒØ±)</h2>
            </div>

            <div class="table-container">
                <table class="data-table attendance-table">
                    <thead>
                        <tr>
                            <th>ØªØ§Ø±ÛŒØ®</th>
                            <th>Ø²Ù…Ø§Ù† ÙˆØ±ÙˆØ¯</th>
                            <th>Ø²Ù…Ø§Ù† Ø®Ø±ÙˆØ¬</th>
                            <th>Ù…Ø¯Øª Ú©Ø§Ø±</th>
                            <th>Ø§Ø¶Ø§ÙÙ‡â€ŒÚ©Ø§Ø±ÛŒ</th>
                            <th>ÙˆØ¶Ø¹ÛŒØª</th>
                        </tr>
                    </thead>
                    <tbody id="attendanceTable">
                        <tr>
                            <td colspan="6" class="text-center text-muted">Ø¯Ø±Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Ø¢Ù…Ø§Ø± Ø­Ø¶ÙˆØ± Ù…Ø§Ù‡Ø§Ù†Ù‡ -->
        <div class="stats-row">
            <div class="stat-card">
                <div class="stat-icon">ğŸ“…</div>
                <div class="stat-info">
                    <p class="stat-value" id="totalDays">-</p>
                    <p class="stat-label">Ø±ÙˆØ² Ø­Ø¶ÙˆØ±</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">â°</div>
                <div class="stat-info">
                    <p class="stat-value" id="totalHours">-</p>
                    <p class="stat-label">Ú©Ù„ Ø³Ø§Ø¹Ø§Øª Ú©Ø§Ø±</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">âš¡</div>
                <div class="stat-info">
                    <p class="stat-value" id="totalOvertime">-</p>
                    <p class="stat-label">Ø§Ø¶Ø§ÙÙ‡â€ŒÚ©Ø§Ø±ÛŒ</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Ø¨Ø®Ø´: Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø±Ø®ØµÛŒ -->
    <div class="tab-content" id="leave-tab">
        <div class="tab-header">
            <h2>ğŸ–ï¸ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø±Ø®ØµÛŒ</h2>
        </div>

        <div style="text-align: center; padding: 40px;">
            <p style="font-size: 18px; margin-bottom: 30px;">Ø¨Ø±Ø§ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø±Ø®ØµÛŒØŒ Ù„Ø·ÙØ§Ù‹ Ø¨Ù‡ ØµÙØ­Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø±ÙˆÛŒØ¯</p>
            <a href="{% url 'core:lawyer_leave_request' %}" class="btn btn-primary btn-lg">
                <span class="btn-icon">ğŸ“‹</span>
                <span class="btn-text">Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø±Ø®ØµÛŒ Ø¬Ø¯ÛŒØ¯</span>
            </a>
        </div>
    </div>

    <!-- Ø¨Ø®Ø´: Ù¾Ø±ÙˆÙ†Ø¯Ù‡â€ŒÙ‡Ø§ -->
    <div class="tab-content" id="cases-tab">
        <div class="tab-header">
            <h2>Ù¾Ø±ÙˆÙ†Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†</h2>
        </div>

        <div class="cases-list">
            {% for case in recent_cases %}
            <div class="case-card">
                <div class="case-header">
                    <h3>{{ case.title }}</h3>
                    <span class="case-number">{{ case.case_number }}</span>
                </div>
                
                <p class="case-description">{{ case.description|truncatewords:20 }}</p>
                
                <div class="case-meta">
                    <div class="meta-item">
                        <span class="meta-label">ÙˆØ¶Ø¹ÛŒØª:</span>
                        <span class="badge status-{{ case.status }}">
                            {% if case.status == 'pending' %}
                                Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±
                            {% elif case.status == 'in_progress' %}
                                Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ
                            {% elif case.status == 'completed' %}
                                ØªÚ©Ù…ÛŒÙ„â€ŒØ´Ø¯Ù‡
                            {% else %}
                                Ø¨Ø³ØªÙ‡â€ŒØ´Ø¯Ù‡
                            {% endif %}
                        </span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯:</span>
                        <span>{{ case.created_at|date:"Y-m-d" }}</span>
                    </div>
                </div>

                <div class="case-actions">
                    <a href="{% url 'admin:core_casefile_change' case.pk %}" class="btn btn-small btn-primary">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª</a>
                </div>
            </div>
            {% empty %}
            <div class="empty-state">
                <p class="empty-icon">ğŸ“­</p>
                <p class="empty-text">Ù‡ÛŒÚ† Ù¾Ø±ÙˆÙ†Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ù‡ Ø´Ù…Ø§ Ø§Ø®ØªØµØ§Øµ Ø¯Ø§Ø¯Ù‡ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}